webpackJsonp([4,1],{"Y/zs":function(t,s){},lEJ1:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Dd8w"),r=e.n(i),n=e("NYxO"),o=e("Gak4");function c(t){var s={g_tk:5381,loginUin:0,hostUin:0,format:"jsonp",inCharset:"utf8",outCharset:"utf-8",notice:0,platform:"yqq",needNewCode:0,singermid:t,order:"listen",begin:0,num:30,songstatus:1};return Object(o.a)({url:"https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg",params:s,callback:"jsonpCallback"})}var l=e("PvFA"),h=e("5zc9"),a=(r()({},Object(n.c)(["singer"])),h.a,{data:function(){return{songs:{}}},methods:{goBack:function(){this.$router.back()},_getSingerList:function(t){var s=this;this.singer.id?c(t).then(function(t){s.songs=Object(l.c)(t.data.list)}):this.$router.push("/singer")}},computed:r()({},Object(n.c)(["singer"])),created:function(){this._getSingerList(this.singer.id)},components:{MusicList:h.a}}),u={render:function(){var t=this.$createElement,s=this._self._c||t;return s("transition",{attrs:{name:"slide"}},[s("div",{attrs:{id:"singer-detail"}},[s("i",{staticClass:"iconfont icon-back",on:{click:this.goBack}}),this._v(" "),this.singer.avatar&&this.songs.length?s("music-list",{attrs:{singer:this.singer,songs:this.songs}}):this._e()],1)])},staticRenderFns:[]};var f=e("VU/8")(a,u,!1,function(t){e("rZmb")},"data-v-4b5eb012",null);s.default=f.exports},rZmb:function(t,s){},wATI:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Dd8w"),r=e.n(i),n=e("Gak4");function o(){return Object(n.a)({url:"https://c.y.qq.com/v8/fcg-bin/v8.fcg",params:{channel:"singer",key:"all_all_all",g_tk:1858198544,format:"jsonp",outCharset:"utf-8",platform:"yqq",page:"list",hostUin:0,inCharset:"utf8",notice:0,needNewCode:0,pagesize:100,pagenum:1},callback:"jsonpCallback"})}var c=e("qwAB"),l=e("lEJ1"),h=e("NYxO"),a=e("F4+m"),u=(a.a,c.a,l.default,r()({_getSinger:function(){var t=this;o().then(function(s){t.singerList=s.data.list})},_moveScrollSinger:function(t){var s=t.touches[0].pageY;s<this.shortcutTop?s=this.shortcutTop:s>this.shortcutBottom-10&&(s=this.shortcutBottom-10),this.shortcutOffset=s,this.$refs.scroll.scrollToElement(this.$refs["scroll-hook"][this.currentIndex])},_clickScrollSinger:function(t,s){this.shortcutOffset=t.pageY,this.$refs.scroll.scrollToElement(this.$refs["scroll-hook"][s],300)},scroll:function(t){this.currentY=Math.abs(Math.floor(t.y))},selectSinger:function(t){this.$router.push({path:"/singer/"+t.id}),this.setSinger(t)},handlePlaylist:function(){var t=this,s=void 0,e=void 0;s=this.playlist.length>0?"60px":"",e=this.playlist.length>0?"-30px":"0px",this.$refs.singer.style.bottom=s,this.$refs["shortcut-hook"].style["margin-top"]=e,this.shortcutTop=this.$refs["shortcut-hook"].offsetTop,this.shortcutBottom=this.$refs["shortcut-hook"].clientHeight+this.$refs["shortcut-hook"].offsetTop;var i=setInterval(function(){t.$refs.scroll&&(clearInterval(i),t.$refs.scroll.refresh())},200)}},Object(h.d)({setSinger:"SET_SINGER"})),{mixins:[a.a],data:function(){return{singerList:[],shortcutTop:0,shortcutBottom:0,shortcutOffset:0,currentY:0}},components:{scroll:c.a,singerDetail:l.default},computed:{fixedSingerlist:function(){var t=this.hotSingerlist,s=this.sortedSingerlist;return s.unshift(t),s.filter(function(t,s){return 0!==t.items.length})},hotSingerlist:function(){var t={title:"热门",items:[]};return this.singerList.filter(function(t,s){return s<10}).forEach(function(s,e){var i={};i.name=s.Fsinger_name,i.avatar="http://y.gtimg.cn/music/photo_new/T001R300x300M000"+s.Fsinger_mid+".jpg?max_age=2592000",i.id=s.Fsinger_mid,t.items.push(i)}),t},sortedSingerlist:function(){var t=[];return"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(function(s,e){var i={};i.title=s,i.items=[],t.push(i)}),this.singerList.forEach(function(s,e){t.forEach(function(t,e){if(s.Findex===t.title){var i={};i.name=s.Fsinger_name,i.avatar="http://y.gtimg.cn/music/photo_new/T001R300x300M000"+s.Fsinger_mid+".jpg?max_age=2592000",i.id=s.Fsinger_mid,t.items.push(i)}})}),t},shortcutList:function(){return this.fixedSingerlist.map(function(t){return t.title.substring(0,1)})},singerListTop:function(){var t=this,s=[0],e=0;return this.$nextTick(function(){t.$refs["scroll-hook"].forEach(function(t,i){e+=t.clientHeight,s.push(e)})}),s},currentIndex:function(){var t=0,s=this.currentY;if(this.shortcutOffset){var e=this.shortcutOffset-this.shortcutTop;t=Math.floor(e/18)}else t=0;for(var i=0;i<this.singerListTop.length-1;i++)s<this.singerListTop[i+1]&&s>this.singerListTop[i]&&(t=i);return 0===s&&(t=0),t}},created:function(){this._getSinger()},mounted:function(){var t=this;this.$nextTick(function(){t.shortcutTop=t.$refs["shortcut-hook"].offsetTop,setTimeout(function(){t.shortcutBottom=t.$refs["shortcut-hook"].clientHeight+t.$refs["shortcut-hook"].offsetTop},500)})},methods:r()({_getSinger:function(){var t=this;o().then(function(s){t.singerList=s.data.list})},_moveScrollSinger:function(t){var s=t.touches[0].pageY;s<this.shortcutTop?s=this.shortcutTop:s>this.shortcutBottom-10&&(s=this.shortcutBottom-10),this.shortcutOffset=s,this.$refs.scroll.scrollToElement(this.$refs["scroll-hook"][this.currentIndex])},_clickScrollSinger:function(t,s){this.shortcutOffset=t.pageY,this.$refs.scroll.scrollToElement(this.$refs["scroll-hook"][s],300)},scroll:function(t){this.currentY=Math.abs(Math.floor(t.y))},selectSinger:function(t){this.$router.push({path:"/singer/"+t.id}),this.setSinger(t)},handlePlaylist:function(){var t=this,s=void 0,e=void 0;s=this.playlist.length>0?"60px":"",e=this.playlist.length>0?"-30px":"0px",this.$refs.singer.style.bottom=s,this.$refs["shortcut-hook"].style["margin-top"]=e,this.shortcutTop=this.$refs["shortcut-hook"].offsetTop,this.shortcutBottom=this.$refs["shortcut-hook"].clientHeight+this.$refs["shortcut-hook"].offsetTop;var i=setInterval(function(){t.$refs.scroll&&(clearInterval(i),t.$refs.scroll.refresh())},200)}},Object(h.d)({setSinger:"SET_SINGER"}))}),f={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{ref:"singer",attrs:{id:"singer"}},[e("scroll",{ref:"scroll",attrs:{listen:!0},on:{scroll:t.scroll}},[t.fixedSingerlist.length>0?e("ul",t._l(t.fixedSingerlist,function(s,i){return e("li",{key:i,ref:"scroll-hook",refInFor:!0,staticClass:"singer-group"},[e("h3",{staticClass:"group-name"},[t._v(t._s(s.title))]),t._v(" "),s?e("ul",t._l(s.items,function(s,i){return e("li",{key:i,staticClass:"singer",on:{click:function(e){return t.selectSinger(s)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.avatar,expression:"singer.avatar"}],staticClass:"singer-avatar"}),t._v(" "),e("span",{staticClass:"singer-name"},[t._v(t._s(s.name))])])}),0):t._e()])}),0):t._e()]),t._v(" "),e("div",{ref:"shortcut-hook",attrs:{id:"shortcut-list-warpper"}},[t.shortcutList.length?e("ul",{attrs:{id:"shortcut-list"}},t._l(t.shortcutList,function(s,i){return e("li",{key:i,ref:"shortcut",refInFor:!0,staticClass:"shortcut",class:{active:t.currentIndex===i},on:{click:function(s){return s.stopPropagation(),t._clickScrollSinger(s,i)},touchmove:function(s){return s.stopPropagation(),s.preventDefault(),t._moveScrollSinger(s)}}},[t._v("\n          "+t._s(s)+"\n        ")])}),0):t._e()]),t._v(" "),t.singerList.length?e("div",{attrs:{id:"fixed-title"}},[t._v(t._s(t.fixedSingerlist[t.currentIndex].title))]):t._e()],1),t._v(" "),t.singerList.length?e("router-view"):t._e()],1)},staticRenderFns:[]};var g=e("VU/8")(u,f,!1,function(t){e("Y/zs")},"data-v-6aa24498",null);s.default=g.exports}});
//# sourceMappingURL=4.3dcfea1b425ea2aa34a5.js.map