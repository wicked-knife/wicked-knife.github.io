$(document).ready(function(){function t(t,e){var a=t.width(),o=e.width(),n=t.height(),s=e.height(),i=!1;if(n<s){t.css({width:"auto",height:"100%"}),a=t.width(),o=e.width();var r=(a-o)/2;t.css("margin-left","-"+r+"px"),i=!0}else{var c=(s-n)/2;t.css("margin-top",c+"px"),i=!0}i&&(t.fadeIn(),i=!1)}function e(){var t=$("#search_input"),e=$(".search_result");t.focus(function(){$(".icon-search").css("color","#3199DB"),e.show()}),t.keyup(a(this.autoComplete)),$(document).click(function(t){"search_input"!==t.target.id&&"search_result"!==t.target.className&&"search_item"!==t.target.className&&($(".icon-search").css("color","#CAD3DC"),e.hide())})}function a(t,e){var a;return e=e||120,function(){var o=this,n=arguments,s=function(){t.apply(o,n)};clearTimeout(a),a=setTimeout(s,e)}}function o(t){t+="\n\n著作权归作者所有。\n商业转载请联系作者获得授权,非商业转载请注明出处。\n原文: "+location.href,$(".post-content").on("copy",function(e){(window.clipboardData||e.originalEvent.clipboardData).setData("text/plain",t),e.preventDefault()})}if($("#menu-toggle").on("click",function(t){$(".g-nav").slideToggle(200),$(document).one("click",function(){$(".g-nav").slideUp(200)}),t.stopPropagation()}),$(".g-nav").on("click",function(t){t.stopPropagation()}),$(window).width()>695){var n=$(".g-header"),s=n.outerHeight(),i=$(".g-logo"),r=$(".g-nav a"),c=$(".g-banner").attr("data-theme"),l=$(document).scrollTop();$(document).scroll(function(){var t=$(this).scrollTop();t>s?(t>3*s&&n.addClass("headerUp"),n.css({"background-color":"rgba(255, 255, 255, .98)","box-shadow":"0 1px 12px rgba(0, 0, 0, .08)"}),i.css({background:"url(/assets/icons/logo_"+c+".svg) no-repeat center","background-size":"100% 100%"}),r.css("color","#666"),$(".g-nav").addClass("nav-"+c)):(n.removeClass("headerUp"),n.css({"background-color":"transparent","box-shadow":"none"}),i.css({background:"url(/assets/icons/logo.svg) no-repeat center","background-size":"100% 100%"}),r.css("color","#fff"),$(".g-nav").removeClass("nav-"+c)),l>t?n.addClass("headerDown"):n.removeClass("headerDown"),l=t})}$(".read-next-item section").each(function(){var t=$(this),e=t.height(),a=$(".read-next-item").height();t.css("margin-top",(a-e)/2+"px"),t.fadeIn()}),$(".read-next-item img").each(function(){t($(this),$(".read-next-item"))}),function(){for(var t=parseInt($("#total_pages").val()),e=parseInt($("#current_pages").val()),a=$("#base_url").val(),o="",n=e-3;n<e;n++)n>0&&1!==n?o+='<a href="'+a+"page"+n+'" class="page-link page-num">'+n+"</a>":1===n&&(o+='<a href="'+a+'" class="page-link page-num">'+n+"</a>");o+='<span class="page-link page-num active">'+e+"</span>";for(var s=e+1;s<=e+3;s++)s<=t&&(o+='<a href="'+a+"page"+s+'" class="page-link page-num">'+s+"</a>");$("#page-link-container").html(o)}(),e.prototype.autoComplete=function(){var t=this.value.toLowerCase();t.length?$(".icon-search").css("color","#3199DB"):$(".icon-search").css("color","#CAD3DC"),$.getJSON("../../search.json").done(function(e){var a="";for(var o in e){var n=e[o],s=n.title,i=n.tags,r=(n.url,s+i);""!==t&&r.toLowerCase().indexOf(t)>=0&&(a+='<a class="search_item" href="'+n.url+'">'+n.title+"</a>")}$(".search_result").html(a)})},new e,"true"===$("#nm-switch").val()&&function(){var t=$("body"),e=new Date,a=e.getHours();(a>=0&&a<=6||23===a)&&t.addClass("night-mode")}(),$(".post-content").on("mouseup",function(t){var e=window.getSelection();e.toString().length>=30&&o(e)}),function(){var t=$("#bing-img");t.on("load",function(){t.fadeIn()})}(),function(){var t=["https://ghostratel.github.io/portfolio/FM/index.html#/channel","https://ws1.sinaimg.cn/large/e3507465gy1fp7rggswkzj20760760tp.jpg","https://ghostratel.github.io/portfolio/Music/index.html#/recommend","https://ghostratel.github.io/portfolio/eleme/index.html#/goods","https://ghostratel.github.io/portfolio/LocalWeather/index.html","https://ghostratel.github.io/portfolio/Wikipedia Viewer/index.html","https://ghostratel.github.io/portfolio/RandomQuoteMachine/index.html","https://ghostratel.github.io/portfolio/Todo list/index.html"],e=document.getElementsByClassName("portfolio-img");Array.prototype.forEach.call(e,function(a){a.addEventListener("click",function(a){var o=Array.prototype.indexOf.call(e,a.target);window.open(t[o],"_blank")})})}(),function(){var t=document.getElementById("music-icon"),e=[{id:"废弃都市",url:"http://ws.stream.qqmusic.qq.com/C100002s6Qdh3xiMmP.m4a?fromtag=46"},{id:"射手村集市",url:"http://ws.stream.qqmusic.qq.com/C100001TZzgw2M9CLw.m4a?fromtag=46"},{id:"射手村",url:"http://ws.stream.qqmusic.qq.com/C100003AE6aP0qYPIv.m4a?fromtag=46"},{id:"射手村外",url:"http://ws.stream.qqmusic.qq.com/C100000VIKhK4QkHL1.m4a?fromtag=46"},{id:"明珠港",url:"http://ws.stream.qqmusic.qq.com/C100000P9FUn4Gxynp.m4a?fromtag=46"},{id:"魔法密林",url:"http://ws.stream.qqmusic.qq.com/C100001ovaDt3uLkAo.m4a?fromtag=46"},{id:"泰国",url:"http://ws.stream.qqmusic.qq.com/C100004BQT1Y0XAI4J.m4a?fromtag=46"}],a=document.getElementById("audio"),o=Math.floor(Math.random()*e.length);a.src=e[o].url,a.addEventListener("canplay",function(){a.play()}),a.addEventListener("ended",function(){o++,o===e.length&&(o=0),a.src=e[o].url}),t.addEventListener("click",function(t){-1===this.className.indexOf("music-stop")?(this.classList.add("music-stop"),a.pause()):(this.classList.remove("music-stop"),a.play())})}()});